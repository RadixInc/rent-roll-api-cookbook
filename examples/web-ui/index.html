<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Rent Roll Uploader | Radix Underwriting</title>
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <svg width="28" height="28" viewBox="0 0 32 32" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <rect width="32" height="32" rx="6" fill="#2563eb"/>
                    <rect x="8" y="8" width="7" height="7" rx="1" fill="white"/>
                    <rect x="17" y="8" width="7" height="7" rx="1" fill="white" fill-opacity="0.6"/>
                    <rect x="8" y="17" width="7" height="7" rx="1" fill="white" fill-opacity="0.6"/>
                    <rect x="17" y="17" width="7" height="7" rx="1" fill="white"/>
                </svg>
                <span>Radix Underwriting</span>
            </div>
        </header>

        <main class="main">
            <!-- Step 1: Upload Form -->
            <div id="uploadStep" class="step active">
                <h1>Rent Roll Uploader</h1>

                <div class="upload-card">
                    <form id="uploadForm">
                        <!-- Drop Zone -->
                        <div id="dropZone" class="drop-zone">
                            <div class="drop-zone-content">
                                <svg class="upload-icon" width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="1.5">
                                    <path d="M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"/>
                                    <polyline points="17 8 12 3 7 8"/>
                                    <line x1="12" y1="3" x2="12" y2="15"/>
                                </svg>
                                <p class="drop-text">Drag & drop your rent rolls here</p>
                                <p class="drop-subtext">or <a href="#" id="browseLink">click to browse</a></p>
                                <p class="file-hint">.xlsx, .xls, .csv (max 20 files, 2 MB each)</p>
                            </div>
                            <input type="file" id="fileInput" multiple accept=".xlsx,.xls,.xlsm,.csv,.ods" hidden>
                        </div>

                        <!-- Selected Files List -->
                        <div id="fileList" class="file-list hidden"></div>

                        <!-- Divider -->
                        <div class="divider"></div>

                        <!-- API Key -->
                        <div class="form-group">
                            <label for="apiKey">API Key <span class="required">*</span></label>
                            <div class="input-with-icon">
                                <input type="password" id="apiKey" placeholder="riq_live_..." required>
                                <button type="button" id="toggleApiKey" class="toggle-visibility" title="Show/Hide">
                                    <svg class="eye-icon" width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                        <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
                                        <circle cx="12" cy="12" r="3"/>
                                    </svg>
                                </button>
                            </div>
                            <p class="field-hint">Your API key from the redIQ platform</p>
                        </div>

                        <!-- Notifications Section -->
                        <div class="form-section">
                            <label class="section-label">Notification Method <span class="optional">(at least one required)</span></label>

                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="emailCheckbox">
                                    <span class="checkmark"></span>
                                    Email
                                </label>
                                <input type="email" id="email" class="conditional-input" placeholder="you@company.com" disabled>
                            </div>

                            <div class="checkbox-group">
                                <label class="checkbox-label">
                                    <input type="checkbox" id="webhookCheckbox">
                                    <span class="checkmark"></span>
                                    Webhook URL
                                </label>
                                <input type="url" id="webhookUrl" class="conditional-input" placeholder="https://your-server.com/callback" disabled>
                                <p class="field-hint webhook-hint hidden">Must be HTTPS</p>
                            </div>
                        </div>

                        <!-- Submit Button -->
                        <button type="submit" id="submitBtn" class="submit-btn" disabled>
                            <span class="btn-text">Submit for Processing</span>
                            <span class="btn-loader hidden">
                                <svg class="spinner" viewBox="0 0 24 24">
                                    <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="3" fill="none" stroke-dasharray="60" stroke-linecap="round"/>
                                </svg>
                                Uploading...
                            </span>
                        </button>
                    </form>
                </div>
            </div>

            <!-- Step 2: Success -->
            <div id="successStep" class="step">
                <div class="success-card">
                    <div class="success-header">
                        <div class="success-icon">
                            <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                                <circle cx="12" cy="12" r="12" fill="#10b981"/>
                                <path d="M8 12.5l2.5 2.5 5-5" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                        </div>
                        <h1>Submitted Successfully!</h1>
                        <p class="subtitle">Your files have been queued for processing. You'll receive a notification when complete.</p>
                    </div>

                    <div class="batch-info">
                        <div class="info-row">
                            <span class="label">Batch ID</span>
                            <span id="batchIdDisplay" class="value mono">-</span>
                        </div>
                        <div class="info-row">
                            <span class="label">Files Uploaded</span>
                            <span id="fileCountDisplay" class="value">-</span>
                        </div>
                    </div>

                    <div id="notificationInfo" class="notification-info hidden">
                        <p>You will receive a notification at:</p>
                        <div class="notification-list">
                            <span id="notificationEmail" class="notification-item hidden">
                                <svg width="14" height="14" viewBox="0 0 24 24" fill="currentColor"><circle cx="12" cy="12" r="5"/></svg>
                                <span class="notification-value"></span>
                            </span>
                        </div>
                    </div>

                    <div class="status-card">
                        <div class="status-header">
                            <h3>Processing Status</h3>
                            <button type="button" id="refreshStatusBtn" class="refresh-btn" title="Refresh status">
                                <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                                    <path d="M23 4v6h-6"/>
                                    <path d="M1 20v-6h6"/>
                                    <path d="M3.51 9a9 9 0 0 1 14.85-3.36L23 10M1 14l4.64 4.36A9 9 0 0 0 20.49 15"/>
                                </svg>
                            </button>
                        </div>

                        <div class="status-content">
                            <div id="statusBadge" class="status-badge queued">
                                <span class="status-dot"></span>
                                <span class="status-text">Queued</span>
                            </div>

                            <div class="progress-container">
                                <div class="progress-bar">
                                    <div id="progressFill" class="progress-fill" style="width: 0%"></div>
                                </div>
                                <span id="progressPercent" class="progress-percent">0% complete</span>
                            </div>

                            <div class="status-details">
                                <div class="detail-row">
                                    <span class="detail-label">Files Completed</span>
                                    <span id="filesCompleted" class="detail-value">0 / 0</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Files In Progress</span>
                                    <span id="filesInProgress" class="detail-value">0</span>
                                </div>
                                <div class="detail-row">
                                    <span class="detail-label">Files Failed</span>
                                    <span id="filesFailed" class="detail-value">0</span>
                                </div>
                            </div>
                        </div>

                        <p class="status-hint">Status refreshes automatically every 30 seconds</p>
                    </div>

                    <button type="button" id="newUploadBtn" class="upload-more-btn">Upload More Files</button>
                </div>
            </div>

            <!-- Error State -->
            <div id="errorStep" class="step">
                <div class="error-card">
                    <div class="error-icon">
                        <svg width="48" height="48" viewBox="0 0 24 24" fill="none">
                            <circle cx="12" cy="12" r="12" fill="#ef4444"/>
                            <path d="M15 9l-6 6M9 9l6 6" stroke="white" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </div>
                    <h1>Upload Failed</h1>
                    <p id="errorMessage" class="error-message">An error occurred</p>
                    <button type="button" id="retryBtn" class="submit-btn">Try Again</button>
                </div>
            </div>
        </main>

        <footer class="footer">
            <p>&copy; 2026 Radix Underwriting. All rights reserved.</p>
        </footer>
    </div>

    <script src="app.js"></script>
</body>
</html>


